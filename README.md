# 🚁 Drone Show Control

高度なドローンショー制御システムのプロトタイプアプリケーションです。リアルタイム3D可視化、GPS ベースのマップ制御、編隊管理などの機能を提供します。

## ✨ 主な機能

### 🎯 ダッシュボード

- ドローン統計のリアルタイム表示
- アクティブドローン数、位置情報、ライブショー数の監視
- 直感的なナビゲーション

### 🌟 3D可視化

- Three.js によるリアルタイム3Dドローン表示
- インタラクティブなカメラ制御（回転、ズーム、パン）
- ドローンの状態別色分け表示
- バッテリー残量の可視化
- 編隊パターンの3D表示

### 🗺️ マップ制御

- MapLibre GL による高精度地図表示
- GPS ベースのドローン位置追跡
- ドローン詳細情報のポップアップ表示
- ナビゲーションコントロール
- 位置情報取得機能

### 🎨 テーマシステム

- ダーク/ライトテーマの切り替え
- ドローン専用カラーパレット
- レスポンシブデザイン対応

## 🛠️ 技術スタック

- **フレームワーク**: Next.js 15.5.3 (App Router)
- **UI**: Material-UI v7 + Tailwind CSS v4
- **3D**: Three.js + React Three Fiber
- **地図**: MapLibre GL
- **状態管理**: Zustand
- **型安全性**: TypeScript (strict mode)
- **パッケージ管理**: pnpm

## 🚀 セットアップ

### 前提条件

- Node.js 18.0.0 以上
- pnpm (推奨) または npm

### インストール

```bash
# リポジトリをクローン
git clone <repository-url>
cd drone-show-control

# 依存関係をインストール
pnpm install

# 開発サーバーを起動
pnpm dev
```

### 利用可能なスクリプト

```bash
# 開発サーバー起動
pnpm dev

# プロダクションビルド
pnpm build

# プロダクションサーバー起動
pnpm start

# リンティング
pnpm lint

# リンティング修正
pnpm lint:fix

# フォーマット
pnpm format

# リンティング修正 + フォーマット（推奨）
pnpm fix

# 型チェック
pnpm typecheck
```

## 📁 プロジェクト構造

```bash
src/
├── app/                    # Next.js App Router
│   ├── page.tsx           # ホームページ（ダッシュボード）
│   ├── 3d/                # 3D可視化ページ
│   └── map/               # マップ制御ページ
├── components/            # React コンポーネント
│   ├── 3d/
│   │   └── DroneScene.tsx # 3Dドローン表示
│   └── map/
│       └── DroneMap.tsx   # マップ表示
├── hooks/                 # カスタムフック
│   └── useDroneData.ts    # ドローデータ管理
├── lib/                   # ユーティリティ
│   ├── drone-utils.ts     # ドローン関連ユーティリティ
│   └── theme/             # テーマ設定
├── types/                 # TypeScript 型定義
│   └── drone.ts           # ドローン関連型
└── schemas/               # JSON Schema
    └── drone-schemas.json # データ検証スキーマ
```

## 🎮 使用方法

### ダッシュボード

1. ホームページでドローン統計を確認
2. 「Open Map Control」でマップビューに移動
3. 「View 3D Scene」で3D可視化に移動

### 3D可視化

- **マウス**: ビューを回転
- **スクロール**: ズームイン/アウト
- **右クリック + ドラッグ**: パン操作

### マップ制御

- ドローンマーカーをクリックして詳細情報を表示
- ナビゲーションコントロールで地図を操作
- 位置情報ボタンで現在地に移動

## 🔧 開発

### 型定義

プロジェクトでは厳密な型安全性を重視し、`any` 型の使用を最小限に抑えています。

### データ管理

現在はモックデータを使用していますが、実際のAPI連携に対応できる設計になっています。

### テーマ

カスタムテーマシステムにより、ドローンショーに特化したカラーパレットを提供しています。

### コード品質管理

- **ESLint**: コードの品質と一貫性を保つ
- **Prettier**: コードフォーマットの自動化
- **Husky**: Gitフックによる品質チェック
- **lint-staged**: ステージされたファイルのみをチェック

### 推奨ワークフロー

```bash
# 開発前の準備
pnpm install

# 開発サーバー起動
pnpm dev

# コード修正後（推奨）
pnpm fix

# コミット前（自動実行）
# pre-commitフックが自動でlint-stagedを実行
```

## 📊 現在の実装状況

- ✅ 基本UI/UX
- ✅ 3D可視化
- ✅ マップ機能
- ✅ リアルタイムデータ更新
- ✅ テーマ切り替え
- ✅ 型安全性
- 🔄 実際のAPI連携（開発中）
- 🔄 ドローン制御機能（開発中）

## 🤝 貢献

プロジェクトへの貢献を歓迎します。プルリクエストやイシューの報告をお待ちしています。

## 📄 ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。
